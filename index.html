<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client-side Hash Calculator</title>
    <script>
    function sha256(str) {
      // We transform the string into an arraybuffer.
      var buffer = new TextEncoder("utf-8").encode(str);
      return crypto.subtle.digest("SHA-256", buffer);
    };

    // From https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest
    function hex(buffer) {
      var hexCodes = [];
      var view = new DataView(buffer);
      for (var i = 0; i < view.byteLength; i += 4) {
        // Using getUint32 reduces the number of iterations needed (we process 4 bytes each time)
        var value = view.getUint32(i)
        // toString(16) will give the hex representation of the number without padding
        var stringValue = value.toString(16)
        // We use concatenation and slice for padding
        var padding = '00000000'
        var paddedValue = (padding + stringValue).slice(-padding.length)
        hexCodes.push(paddedValue);
      }
      return hexCodes.join("");
    };

    // Hash and print a test string.
    var stringToHash = 'hashme\n';
    sha256(stringToHash)
      .then(function(hashArray) {
        console.log(hex(hashArray));
      }).catch(function(err) {
        console.log(err)
      });   
    </script>
  </head>
  <body>
  </body>
</html>
